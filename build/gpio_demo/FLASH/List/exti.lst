###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.60.1.5097/W32 for ARM      15/Aug/2015  12:46:22 #
# Copyright 1999-2013 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\Administrator\Desktop\MPU60508.12\src\drivers\e #
#                    xti\exti.c                                               #
#    Command line =  C:\Users\Administrator\Desktop\MPU60508.12\src\drivers\e #
#                    xti\exti.c -lCN C:\Users\Administrator\Desktop\MPU60508. #
#                    12\build\gpio_demo\FLASH\List\ -lB                       #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\FLASH\List\ -o C:\Users\Administrator\Desktop\MPU6050 #
#                    8.12\build\gpio_demo\FLASH\Obj\ --no_cse --no_unroll     #
#                    --no_inline --no_code_motion --no_tbaa --no_clustering   #
#                    --no_scheduling --debug --endian=little --cpu=Cortex-M4  #
#                    -e --fpu=None --dlib_config "D:\IAR Systems\Embedded     #
#                    Workbench 6.5\arm\INC\c\DLib_Config_Normal.h" -I         #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\ -I C:\Users\Administrator\Desktop\MPU60508.12\bui #
#                    ld\gpio_demo\..\..\src\common\ -I                        #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\cpu\ -I C:\Users\Administrator\Desktop\MPU6 #
#                    0508.12\build\gpio_demo\..\..\src\drivers\ -I            #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\gpio\ -I                            #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\flash\ -I                           #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\olcd\ -I                            #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\diskio\ -I                          #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\iospi\ -I                           #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\wdog\ -I                            #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\mcg\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\flash\ -I                           #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\uart\ -I                            #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\lptmr\ -I                           #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\LED\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\fun\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\FTM\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\pit\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\DIPswitch\ -I                       #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\steer\ -I                           #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\motor\ -I                           #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\laser\ -I                           #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\i2c\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\ADdevice\ -I                        #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\adc\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\serial_digtal_scope\ -I             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\MMA845x\ -I                         #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\exti\ -I                            #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\dma\ -I                             #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\platforms\ -I C:\Users\Administrator\Deskto #
#                    p\MPU60508.12\build\gpio_demo\..\..\src\projects\ -I     #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\projects\gpio_demo\ -I                      #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\MPU6050\ -I                         #
#                    C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\..\..\src\drivers\steer\ -Ol                          #
#    List file    =  C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\FLASH\List\exti.lst                                   #
#    Object file  =  C:\Users\Administrator\Desktop\MPU60508.12\build\gpio_de #
#                    mo\FLASH\Obj\exti.o                                      #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\Administrator\Desktop\MPU60508.12\src\drivers\exti\exti.c
      1          /*
      2          ************************************************************************
      3          *                北京邮电大学 K60 学习例程                                        
      4          * 文件名 :[exti.c] 
      5          * 描  述 ：EXTI外部GPIO中断例程
      6          *设计改进：snowwolf
      7          *  Email ：snowwolf2012@qq.com
      8          * 说  明 ：GPIO外部中断模块
      9          ***********************************************************************
     10          */
     11          #include "common.h"
     12          #include "gpio.h"
     13          #include "exti.h"   
     14          
     15          
     16          
     17          /*************************************************************************
     18          *  函数名称：exti_init
     19          *  功能说明：EXTI外部GPIO中断初始化
     20          *  参数说明：PORTx       端口号（PORTA,PORTB,PORTC,PORTD,PORTE）
     21          *            n           端口引脚
     22          *            exti_cfg    触发选项和上拉下拉选项
     23          *  函数返回：无
     24          *  修改时间：2012-1-20
     25          *  备    注：
     26          *************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     27          void  exti_init(PORTx portx, u8 n,exti_cfg cfg)
     28          {
   \                     exti_init: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
     29              SIM_SCGC5 |= (SIM_SCGC5_PORTA_MASK<<portx);      //开启PORTx端口
   \   00000002   0x....             LDR.N    R3,??DataTable2  ;; 0x40048038
   \   00000004   0x681B             LDR      R3,[R3, #+0]
   \   00000006   0xF44F 0x7400      MOV      R4,#+512
   \   0000000A   0x4084             LSLS     R4,R4,R0
   \   0000000C   0x4323             ORRS     R3,R4,R3
   \   0000000E   0x....             LDR.N    R4,??DataTable2  ;; 0x40048038
   \   00000010   0x6023             STR      R3,[R4, #+0]
     30              
     31              PORT_PCR_REG(PORTX[portx],n)=0 | PORT_PCR_MUX(1)| PORT_PCR_IRQC(cfg & 0x7f ) | PORT_PCR_PE_MASK | ((cfg & 0x80 )>>7) |PORT_PCR_PFE_MASK;   // 复用GPIO , 确定触发模式 ,开启上拉或下拉电阻
   \   00000012   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000014   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000016   0x....             LDR.N    R3,??DataTable2_1
   \   00000018   0xF853 0x3020      LDR      R3,[R3, R0, LSL #+2]
   \   0000001C   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   0000001E   0x0414             LSLS     R4,R2,#+16
   \   00000020   0xF414 0x2470      ANDS     R4,R4,#0xF0000
   \   00000024   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   00000026   0x09D2             LSRS     R2,R2,#+7
   \   00000028   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   0000002A   0x4322             ORRS     R2,R2,R4
   \   0000002C   0xF452 0x7289      ORRS     R2,R2,#0x112
   \   00000030   0xF843 0x2021      STR      R2,[R3, R1, LSL #+2]
     32              GPIO_PDDR_REG(GPIOx[portx])&=~(1<<n);           //输入模式
   \   00000034   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000036   0x....             LDR.N    R2,??DataTable2_2
   \   00000038   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   0000003C   0x6952             LDR      R2,[R2, #+20]
   \   0000003E   0x2301             MOVS     R3,#+1
   \   00000040   0x408B             LSLS     R3,R3,R1
   \   00000042   0x439A             BICS     R2,R2,R3
   \   00000044   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000046   0x....             LDR.N    R3,??DataTable2_2
   \   00000048   0xF853 0x3020      LDR      R3,[R3, R0, LSL #+2]
   \   0000004C   0x615A             STR      R2,[R3, #+20]
     33               
     34              PORT_ISFR_REG(PORTX[portx])|= (1<<n);
   \   0000004E   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000050   0x....             LDR.N    R2,??DataTable2_1
   \   00000052   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   00000056   0xF8D2 0x20A0      LDR      R2,[R2, #+160]
   \   0000005A   0x2301             MOVS     R3,#+1
   \   0000005C   0xFA13 0xF101      LSLS     R1,R3,R1
   \   00000060   0x4311             ORRS     R1,R1,R2
   \   00000062   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000064   0x....             LDR.N    R2,??DataTable2_1
   \   00000066   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   0000006A   0xF8C2 0x10A0      STR      R1,[R2, #+160]
     35              enable_irq(portx+87);                           //使能PORT中断，PORTA的ISR中断号为87
   \   0000006E   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000070   0x3057             ADDS     R0,R0,#+87
   \   00000072   0x.... 0x....      BL       enable_irq
     36          }
   \   00000076   0xBD10             POP      {R4,PC}          ;; return
     37          /*************************************************************************
     38          *  函数名称：exti_irq_DIS
     39          *  功能说明：外部中断关闭
     40          *  参数说明：PORTx       端口号（PORTA,PORTB,PORTC,PORTD,PORTE）
     41          *            n           端口引脚
     42          *  函数返回：无
     43          *  修改时间：2012-11-26
     44          *  备    注：用于关闭某个管脚的中断功能
     45          *************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     46          void  exti_irq_DIS(PORTx portx, u8 n)
     47          {    
   \                     exti_irq_DIS: (+1)
   \   00000000   0xB410             PUSH     {R4}
     48              PORT_PCR_REG(PORTX[portx],n) &= ~PORT_PCR_IRQC_MASK;
   \   00000002   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000004   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000006   0x....             LDR.N    R2,??DataTable2_1
   \   00000008   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   0000000C   0x000B             MOVS     R3,R1
   \   0000000E   0xB2DB             UXTB     R3,R3            ;; ZeroExt  R3,R3,#+24,#+24
   \   00000010   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000012   0x....             LDR.N    R4,??DataTable2_1
   \   00000014   0xF854 0x0020      LDR      R0,[R4, R0, LSL #+2]
   \   00000018   0xF850 0x0023      LDR      R0,[R0, R3, LSL #+2]
   \   0000001C   0xF430 0x2070      BICS     R0,R0,#0xF0000
   \   00000020   0xF842 0x0021      STR      R0,[R2, R1, LSL #+2]
     49          }
   \   00000024   0xBC10             POP      {R4}
   \   00000026   0x4770             BX       LR               ;; return
     50          /*************************************************************************
     51          *  函数名称：exti_irq_EN
     52          *  功能说明：使能某一个管脚的中断功能
     53          *  参数说明：PORTx       端口号（PORTA,PORTB,PORTC,PORTD,PORTE）
     54          *            n           端口引脚
     55          *            exti_cfg    触发选项和上拉下拉选项
     56          *  函数返回：无
     57          *  修改时间：2012-3-24
     58          *  备    注：
     59          *************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     60          void  exti_irq_EN(PORTx portx, u8 n,exti_cfg cfg)
     61          {    
   \                     exti_irq_EN: (+1)
   \   00000000   0xB410             PUSH     {R4}
     62              PORT_PCR_REG(PORTX[portx],n)=0 | PORT_PCR_MUX(1)| PORT_PCR_IRQC(cfg & 0x7f ) | PORT_PCR_PE_MASK | ((cfg & 0x80 )>>7) |PORT_PCR_PFE_MASK;   // 复用GPIO , 确定触发模式 ,开启上拉或下拉电阻
   \   00000002   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000004   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000006   0x....             LDR.N    R3,??DataTable2_1
   \   00000008   0xF853 0x3020      LDR      R3,[R3, R0, LSL #+2]
   \   0000000C   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   0000000E   0x0414             LSLS     R4,R2,#+16
   \   00000010   0xF414 0x2470      ANDS     R4,R4,#0xF0000
   \   00000014   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   00000016   0x09D2             LSRS     R2,R2,#+7
   \   00000018   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   0000001A   0x4322             ORRS     R2,R2,R4
   \   0000001C   0xF452 0x7289      ORRS     R2,R2,#0x112
   \   00000020   0xF843 0x2021      STR      R2,[R3, R1, LSL #+2]
     63              GPIO_PDDR_REG(GPIOx[portx])&=~(1<<n);           //输入模式
   \   00000024   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000026   0x....             LDR.N    R2,??DataTable2_2
   \   00000028   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   0000002C   0x6952             LDR      R2,[R2, #+20]
   \   0000002E   0x2301             MOVS     R3,#+1
   \   00000030   0x408B             LSLS     R3,R3,R1
   \   00000032   0x439A             BICS     R2,R2,R3
   \   00000034   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000036   0x....             LDR.N    R3,??DataTable2_2
   \   00000038   0xF853 0x3020      LDR      R3,[R3, R0, LSL #+2]
   \   0000003C   0x615A             STR      R2,[R3, #+20]
     64               
     65              PORT_ISFR_REG(PORTX[portx])|= (1<<n);
   \   0000003E   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000040   0x....             LDR.N    R2,??DataTable2_1
   \   00000042   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   00000046   0xF8D2 0x20A0      LDR      R2,[R2, #+160]
   \   0000004A   0x2301             MOVS     R3,#+1
   \   0000004C   0xFA13 0xF101      LSLS     R1,R3,R1
   \   00000050   0x4311             ORRS     R1,R1,R2
   \   00000052   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000054   0x....             LDR.N    R2,??DataTable2_1
   \   00000056   0xF852 0x0020      LDR      R0,[R2, R0, LSL #+2]
   \   0000005A   0xF8C0 0x10A0      STR      R1,[R0, #+160]
     66          }
   \   0000005E   0xBC10             POP      {R4}
   \   00000060   0x4770             BX       LR               ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   0x40048038         DC32     0x40048038

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \   00000000   0x........         DC32     PORTX

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \   00000000   0x........         DC32     GPIOx

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   exti_init
         8   -> enable_irq
       4   exti_irq_DIS
       4   exti_irq_EN


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_2
     120  exti_init
      40  exti_irq_DIS
      98  exti_irq_EN

 
 270 bytes in section .text
 
 270 bytes of CODE memory

Errors: none
Warnings: none
